<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project bar chart</title>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <style>    
    /* .axis path,
	.axis line{
		fill: none;
		stroke: black;
		shape-rendering: crispEdges;
	}
	 
	.axis text {
		font-family: sans-serif;
		font-size: 11px;
	} */

	.MyRect {
		fill: steelblue;
	}

	.MyText {
		fill: white;
		text-anchor: middle;
	}

	</style>

</head>
<body> 

<h1>Project bar chart</h1>
<script>
var body = d3.select("body");
var width = 400;
var height = 400;
var svg = body.append("svg")
			.attr("width", 400)
			.attr("height", 400);

// dataset 
// dataset = [20, 30, 40 , 50 ,60]
d3.csv("AUS_disasters.csv", function(d) {
        return {
            year: +d.Year,
            number: +d.Disaster_Internal_Displacements
        };
    }).then(function(data) {  
        var dataset = data; //assign
        lineChart(dataset);
        console.table(dataset, ["year", "number"]); 
        // console.log(data);
    });

// 1.Scale 
var xScale = d3.scaleBand()
				// .domain([2008, 2010, 2013, 2015, 2017, 2019, 2021])
                .domain(d3.range(dataset.length))
				.range([0, width])
                .padding(0.1);

var yScale = d3.scaleLinear()
				.domain([100, 0]) //
				.range([0, 250]); //

// 2. Coordinate
var xAxis = d3.axisBottom(xScale);
var gxAxis = svg.append("g")
				.attr("class","axis")
				.attr("transform","translate(50, 300)")
				.call(xAxis);

var yAxis = d3.axisLeft(yScale);
var gyAxis = svg.append("g")
				.attr("class","axis")
				.attr("transform","translate(50,50)")
				.call(yAxis);

// // 3. Bar chart

var rects = svg.selectAll(".MyRect")
				.data(dataset)
				.enter()
				.append("rect")
				.attr("class","MyRect")
				.attr("transform", "translate(52, 50)")
				.attr("x", function(d, i){
					return xScale(i);
				})
				.attr("y", function(d){
					return height - 150 - yScale(d);
				})
				.attr("width", xScale.bandwidth() - 4)
				.attr("height", function(d){
					return yScale(d);
				});

var texts = svg.selectAll(".MyText")
				.data(dataset)
				.enter()
				.append("text")
				.attr("class","MyText")
				.attr("transform","translate(30,50)")
				.attr("x", function(d,i){
					return xScale(i);
				})
				.attr("y", function(d){
					return width - 150 - yScale(d);
				})
				// .attr("dx",function(){
				// 	return xScale.rangeBand()/2;
				// })
				// .attr("dy",function(d){
				// 	return 15;
				// })
				.text(function(d){
					return d;
				});
</script>
<footer></footer>

</body>
</html>